{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags i18n i18n_simple %}

{% block content %}
<section class="news-index">
  <h1 class="news-index__title">{{ page.title }}</h1>

  {% if page.advert %}
    <div class="advert">
    <a href="{{ page.advert.url }}" target="_blank" rel="noopener">
      {% if page.advert.image %}
      {% image page.advert.image fill-1200x180 %}
      {% else %}
      {{ page.advert }}
      {% endif %}
    </a>

    </div>
  {% endif %}

  <form method="get" class="news-index__search">
    <input
      type="text"
      name="q"
      placeholder="{% trans 'Search' %}"
      value="{{ search_query|default_if_none:'' }}"
    />
    <button type="submit" aria-label="{% trans 'Search' %}">
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.90906 2C5.93814 2 4.98903 2.28791 4.18174 2.82733C3.37444 3.36674 2.74524 4.13343 2.37368 5.03045C2.00213 5.92746 1.90491 6.91451 2.09433 7.86677C2.28375 8.81904 2.75129 9.69375 3.43783 10.3803C4.12438 11.0668 4.99909 11.5344 5.95135 11.7238C6.90362 11.9132 7.89067 11.816 8.78768 11.4444C9.6847 11.0729 10.4514 10.4437 10.9908 9.63639C11.5302 8.8291 11.8181 7.87998 11.8181 6.90906C11.818 5.60712 11.3008 4.35853 10.3802 3.43792C9.45959 2.51731 8.211 2.00008 6.90906 2Z" stroke="#000" stroke-width="1.5" stroke-miterlimit="10"/>
            <path d="M10.5715 10.5715L14 14" stroke="#000" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
            </svg>

    </button>
  </form>

  <div class="news-grid">
    {% for post in news %}
      <article class="news-card">
        <a href="{% pageurl post %}" class="news-card__image-wrap">
          {% if post.image %}
            {% image post.image fill-400x250 class="news-card__image" %}
          {% endif %}
        </a>

        <div class="news-card__content">
          <a class="news-card__title" href="{% pageurl post %}">
            {{ post.title }}
          </a>

          <div class="news-card__meta">
            {% if post.author %}
              <div class="news-card__author">
                {% if post.author.photo %}
                  {% image post.author.photo fill-24x24 class="news-card__author-avatar" %}
                {% endif %}
                <span class="news-card__author-name">{{ post.author.name }}</span>
              </div>
            {% endif %}

            {% if post.publication_date %}
              <time class="news-card__date">
                {{ post.publication_date|date:"F d, Y"|capfirst }}
              </time>
            {% endif %}
          </div>
        </div>
      </article>
    {% empty %}
      <p>{% translate "No News yet." %}</p>
    {% endfor %}

  </div>

  {% if news.paginator.num_pages > 1 %}
    <nav class="pagination">
      {% if news.paginator.num_pages > 1 %}
      <div class="form-submit home-actions">
    {% if news.has_previous %}
      <a class="pagination__prev"
         href="?page={{ news.previous_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}">
        ← {% t "previous" %}
      </a>
    {% endif %}

    {% if news.has_next %}
      <a class="pagination__next"
         href="?page={{ news.next_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}">
        {% t "next" %} →
      </a>
    {% endif %}
      </div>
{% endif %}

    </nav>
  {% endif %}
</section>
{% endblock content %}
