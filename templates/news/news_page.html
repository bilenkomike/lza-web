{% extends "base.html" %}
{% load static i18n wagtailimages_tags wagtailcore_tags %}

{% block content %}
<section class="news-detail">
  <header class="news-detail__header">
    <h1 class="news-detail__title">{{ page.title }}</h1>

    <div class="news-detail__meta">
      {% if page.author %}
        <div class="news-detail__author">
          {% if page.author.photo %}
            {% image page.author.photo fill-24x24 class="news-detail__author-avatar" %}
          {% endif %}
          <span class="news-detail__author-name">{{ page.author.name }}</span>
        </div>
      {% endif %}

      {% if page.publication_date %}
        <time class="news-detail__date">
          {{ page.publication_date|date:"F d, Y"|capfirst }}
        </time>
      {% endif %}
    </div>
  </header>

  {% if page.image %}
    <div class="news-detail__hero">
      {% image page.image fill-960x480 class="news-detail__hero-image" %}
    </div>
  {% endif %}

  <div class="news-detail__content">
    {% for block in page.body %}
  {% if block.block_type == "heading" %}
    <h2 class="block-heading">{{ block.value }}</h2>

  {% elif block.block_type == "paragraph" %}
    <div class="block-paragraph">
      {{ block.value }}
    </div>

  {% elif block.block_type == "image" %}
    {% load wagtailimages_tags %}
    <figure class="block-image">
      {% image block.value.image fill-960x540 class="block-image" %}
    </figure>

  {% elif block.block_type == "advert" %}
    <div class="news-index__advert block-advert">
      {{ block.value }}
    </div>

  {% endif %}
{% endfor %}
  </div>
</section>
{% endblock content %}
